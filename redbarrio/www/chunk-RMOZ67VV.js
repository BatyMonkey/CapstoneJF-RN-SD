import{a as X}from"./chunk-CATCBSYX.js";import"./chunk-TX5AFJTF.js";import"./chunk-66QFWZLQ.js";import{A as i,B as f,C as m,Fa as T,Ga as D,Ha as N,Ia as U,Ja as $,K as v,Ka as j,L as b,Ma as z,Na as F,P,Q as S,Qa as L,Ra as H,S as O,Sa as B,Ta as R,Y as w,ab as A,db as G,f as _,g as I,h as C,i as a,ib as V,j as u,k as M,lb as Y,m as x,mb as q,o as d,ob as J,p as e,q as t,r as p,ta as k,u as E,ub as K,v as y,vb as W,w as g}from"./chunk-H7HGEQUX.js";import"./chunk-G4GOZ2R2.js";import"./chunk-2GHFZAQB.js";import"./chunk-QUJFQN2Y.js";import"./chunk-VBARJE22.js";import"./chunk-6T3MRKSY.js";import"./chunk-LG5HFCS7.js";import"./chunk-PTM2QU7L.js";import"./chunk-Z7QLWI7J.js";import"./chunk-DNXVUVY2.js";import"./chunk-JS56SECH.js";import"./chunk-GFYYGWWH.js";import"./chunk-EXVGCGBZ.js";import"./chunk-IACAUHTZ.js";import"./chunk-WIVIOYVM.js";import"./chunk-ULQSOQCK.js";import"./chunk-JOPIHTUJ.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-EKNMT7ZB.js";import"./chunk-CKP3SGE2.js";import"./chunk-K6CL52MX.js";import{j as h}from"./chunk-VI73JOY6.js";function te(r,l){r&1&&(e(0,"div",7),p(1,"ion-spinner",8),e(2,"p"),i(3,"Cargando detalles del espacio..."),t()())}function ie(r,l){if(r&1&&(e(0,"div",9)(1,"ion-card",10)(2,"ion-card-header")(3,"ion-card-title"),i(4,"Error"),t()(),e(5,"ion-card-content"),i(6),t()()()),r&2){let o=g();a(6),f(o.error)}}function ne(r,l){if(r&1&&p(0,"ion-img",16),r&2){let o=g(2);d("src",o.espacio.imagen_url)}}function oe(r,l){if(r&1){let o=E();e(0,"div",17),y("click",function(){_(o);let n=g(2);return I(n.openInExternalMap())}),p(1,"img",18),e(2,"div",19),p(3,"ion-icon",20),e(4,"p"),i(5,"Toca el mapa para Navegar con GPS"),t()()()}if(r&2){let o=g(2);a(),d("src",o.staticMapUrl,C)}}function ae(r,l){r&1&&(e(0,"div",7)(1,"p"),i(2,"Ubicaci\xF3n y mapa no disponible."),t()())}function re(r,l){if(r&1&&(e(0,"div")(1,"ion-card",11),x(2,ne,1,1,"ion-img",12),e(3,"ion-card-header")(4,"ion-card-title"),i(5),t()(),e(6,"ion-card-content")(7,"ion-grid")(8,"ion-row")(9,"ion-col",13)(10,"p")(11,"strong"),i(12,"Tipo:"),t(),i(13),t()(),e(14,"ion-col",13)(15,"p")(16,"strong"),i(17,"Capacidad:"),t(),i(18),t()()()(),e(19,"h3",14),i(20,"Descripci\xF3n"),t(),e(21,"p"),i(22),t()()(),e(23,"ion-card",11)(24,"ion-card-header")(25,"ion-card-title"),i(26,"Ubicaci\xF3n"),t(),e(27,"ion-card-subtitle"),i(28),t()(),x(29,oe,6,1,"div",15)(30,ae,3,0,"div",4),e(31,"ion-card-content",14)(32,"p")(33,"strong"),i(34,"Coordenadas:"),t()(),e(35,"ion-note"),i(36),t(),p(37,"br"),e(38,"ion-note"),i(39),t(),e(40,"p",14)(41,"strong"),i(42,"Registro:"),t()(),e(43,"ion-note"),i(44),v(45,"date"),t(),p(46,"br"),e(47,"ion-note"),i(48),v(49,"date"),t()()()()),r&2){let o=g();a(2),d("ngIf",o.espacio.imagen_url),a(3),f(o.espacio.nombre),a(8),m(" ",o.tipoNombre),a(5),m(" ",o.espacio.capacidad," personas"),a(4),f(o.espacio.descripcion||"Sin descripci\xF3n detallada."),a(6),f(o.espacio.direccion_completa),a(),d("ngIf",o.staticMapUrl),a(),d("ngIf",!o.staticMapUrl),a(6),m("Latitud: ",o.espacio.latitud),a(3),m("Longitud: ",o.espacio.longitud),a(5),m("Creado: ",b(45,12,o.espacio.creado_en,"dd/MM/yyyy HH:mm")),a(4),m("Actualizado: ",b(49,15,o.espacio.actualizado_en,"dd/MM/yyyy HH:mm"))}}var ce="sk.eyJ1IjoiYmF0eW1vbmtleSIsImEiOiJjbWdpYmltcGMwN2FoMmxweGtoYjNxajU5In0.2lE0EvGf4Onc4DhfytKERg",xe=(()=>{let l=class l{constructor(c,n,s){this.activatedRoute=c,this.espaciosService=n,this.toastCtrl=s,this.espacio=null,this.isLoading=!0,this.error=null,this.tiposEspacioMap=new Map([[1,"Cancha"],[2,"Sede"],[3,"Parque"]])}ngOnInit(){this.activatedRoute.params.subscribe(c=>{let n=+c.id;n&&!isNaN(n)?this.cargarDetalleEspacio(n):(this.error="ID de espacio no proporcionado o inv\xE1lido.",this.isLoading=!1,this.mostrarToast(this.error,"danger"))})}cargarDetalleEspacio(c){return h(this,null,function*(){this.isLoading=!0,this.error=null;try{this.espacio=yield this.espaciosService.obtenerEspacioPorId(c),this.espacio||(this.error="El espacio solicitado no existe.",this.mostrarToast(this.error,"warning"))}catch(n){this.error=n.message||"Error al cargar los detalles del espacio.",this.mostrarToast(this.error,"danger")}finally{this.isLoading=!1}})}get tipoNombre(){if(this.espacio&&this.espacio.tipo){let c=parseInt(this.espacio.tipo.toString(),10);return this.tiposEspacioMap.get(c)||"Desconocido"}return"N/A"}get staticMapUrl(){if(!this.espacio||!this.espacio.latitud||!this.espacio.longitud)return null;let c=this.espacio.latitud,n=this.espacio.longitud,s="mapbox/streets-v11",Q="600x250",Z=15,ee=`pin-s-pitch+f00(${n},${c})`;return`https://api.mapbox.com/styles/v1/${s}/static/${ee}/${n},${c},${Z},0,0/${Q}?access_token=${ce}`}openInExternalMap(){if(this.espacio){let c=this.espacio.latitud,n=this.espacio.longitud,s=`http://maps.google.com/?q=${c},${n}`;window.open(s,"_system")}else this.mostrarToast("Ubicaci\xF3n no disponible.","warning")}mostrarToast(c,n){return h(this,null,function*(){(yield this.toastCtrl.create({message:c,duration:3e3,color:n})).present()})}};l.\u0275fac=function(n){return new(n||l)(u(w),u(X),u(K))},l.\u0275cmp=M({type:l,selectors:[["app-detalle-espacio"]],decls:10,vars:6,consts:[[1,"rb-header",3,"translucent"],["slot","start"],["defaultHref","/espacios"],[3,"fullscreen"],["class","ion-padding ion-text-center",4,"ngIf"],["class","ion-padding",4,"ngIf"],[4,"ngIf"],[1,"ion-padding","ion-text-center"],["name","crescent"],[1,"ion-padding"],["color","danger"],[1,"card"],["alt","Imagen del espacio","style","width: 100%; height: 220px; object-fit: cover;",3,"src",4,"ngIf"],["size","6"],[1,"ion-padding-top"],["class","map-button-container",3,"click",4,"ngIf"],["alt","Imagen del espacio",2,"width","100%","height","220px","object-fit","cover",3,"src"],[1,"map-button-container",3,"click"],["alt","Toca el mapa para navegar",1,"map-image-clickable",3,"src"],[1,"map-overlay-text"],["name","navigate-circle","size","large"]],template:function(n,s){n&1&&(e(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),p(3,"ion-back-button",2),t(),e(4,"ion-title"),i(5),t()()(),e(6,"ion-content",3),x(7,te,4,0,"div",4)(8,ie,7,1,"div",5)(9,re,50,18,"div",6),t()),n&2&&(d("translucent",!0),a(5),f((s.espacio==null?null:s.espacio.nombre)||"Detalle del Espacio"),a(),d("fullscreen",!0),a(),d("ngIf",s.isLoading),a(),d("ngIf",s.error),a(),d("ngIf",s.espacio&&!s.isLoading))},dependencies:[W,T,D,N,U,$,j,z,F,L,H,B,R,A,G,V,Y,q,J,O,P,k,S],styles:['@charset "UTF-8";[_nghost-%COMP%], html[_nghost-%COMP%], html   [_nghost-%COMP%]{color-scheme:light!important;--rb-primary: #2563eb;--rb-bg: #f5f7fb;--rb-text: #0f172a;--rb-muted: #475569;--ion-text-color: var(--rb-text);--ion-background-color: var(--rb-bg);--ion-item-background: #ffffff;--ion-card-background: #ffffff}.rb-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: linear-gradient(135deg, var(--rb-primary), #60a5fa);--color: #fff;--border-color: transparent}ion-card.card[_ngcontent-%COMP%]{background:#fff;border-radius:18px;border:1px solid rgba(2,6,23,.08);box-shadow:0 12px 28px #0206171a;overflow:hidden;margin-bottom:16px}ion-card.card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]{background:#fff;border-bottom:1px solid rgba(2,6,23,.06);padding-bottom:8px}ion-card.card[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{color:var(--rb-text);font-weight:800;font-size:1.4rem}ion-card.card[_ngcontent-%COMP%]   ion-card-subtitle[_ngcontent-%COMP%]{color:#64748b;font-weight:600;margin-top:4px}ion-card.card[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--rb-text)}ion-card.card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--rb-text);font-weight:700;font-size:1.15rem}ion-card.card[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{color:var(--rb-muted)}.page-wrap[_ngcontent-%COMP%]{max-width:960px;margin:0 auto}.map-button-container[_ngcontent-%COMP%]{position:relative;cursor:pointer;overflow:hidden}.map-button-container[_ngcontent-%COMP%]:hover{opacity:.95}.map-image-clickable[_ngcontent-%COMP%]{width:100%;display:block}.map-overlay-text[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;background:#00000073;color:#fff;text-shadow:1px 1px 2px black}.map-overlay-text[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--rb-primary);font-size:3em;margin-bottom:8px}.map-overlay-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-weight:700}@media (prefers-color-scheme: dark){[_nghost-%COMP%]{--ion-background-color: var(--rb-bg);--ion-card-background: #ffffff;--ion-item-background: #ffffff;--ion-text-color: var(--rb-text)}}']});let r=l;return r})();export{xe as DetalleEspacioPage};
