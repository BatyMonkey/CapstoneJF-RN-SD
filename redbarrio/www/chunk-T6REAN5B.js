import{a as X}from"./chunk-DCNUAMF7.js";import{a as W}from"./chunk-DSYC522I.js";import"./chunk-BSJEIMOO.js";import"./chunk-CGH6KSUE.js";import{A as v,B as h,Da as T,Ea as N,Fa as z,Ga as A,Ha as F,Ia as V,Ja as D,La as L,Ma as j,N as P,O,Oa as q,Pa as B,Qa as R,R as w,Ra as U,Sa as $,Z as y,Za as H,aa as S,cb as Y,f,g as u,hb as G,i as c,j as _,k as I,kb as J,lb as K,m,n as l,o as r,p as o,q as g,r as E,s as M,sa as k,t as b,u as x,ub as Q,v as p,z as s}from"./chunk-JZTRD5FY.js";import"./chunk-G4GOZ2R2.js";import"./chunk-2GHFZAQB.js";import"./chunk-QUJFQN2Y.js";import"./chunk-VBARJE22.js";import"./chunk-6T3MRKSY.js";import"./chunk-LG5HFCS7.js";import"./chunk-PTM2QU7L.js";import"./chunk-Z7QLWI7J.js";import"./chunk-DNXVUVY2.js";import"./chunk-JS56SECH.js";import"./chunk-GFYYGWWH.js";import"./chunk-EXVGCGBZ.js";import"./chunk-IACAUHTZ.js";import"./chunk-WIVIOYVM.js";import"./chunk-ULQSOQCK.js";import"./chunk-JOPIHTUJ.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-EKNMT7ZB.js";import"./chunk-CKP3SGE2.js";import"./chunk-K6CL52MX.js";import{j as C}from"./chunk-VI73JOY6.js";function Z(e,a){e&1&&(r(0,"div",8),g(1,"ion-spinner",9),r(2,"p"),s(3,"Cargando lista de espacios..."),o()())}function ee(e,a){if(e&1&&g(0,"ion-img",16),e&2){let t=p().$implicit;l("src",t.imagen_url)}}function te(e,a){if(e&1){let t=b();r(0,"ion-card",11),x("click",function(){let n=f(t).$implicit,d=p(2);return u(d.goToDetail(n.id_espacio))}),m(1,ee,1,1,"ion-img",12),r(2,"ion-card-header")(3,"ion-card-title"),s(4),o(),r(5,"ion-card-subtitle"),s(6),o()(),r(7,"ion-card-content")(8,"ion-grid")(9,"ion-row")(10,"ion-col",13)(11,"p")(12,"strong"),s(13,"Tipo:"),o(),s(14),o()(),r(15,"ion-col",14)(16,"p")(17,"strong"),s(18,"Capacidad:"),o(),s(19),o()()()(),r(20,"p",15),s(21),o()()()}if(e&2){let t=a.$implicit,i=p(2);c(),l("ngIf",t.imagen_url),c(3),v(t.nombre),c(2),v(t.direccion_completa||"Direcci\xF3n no especificada"),c(8),h(" ",i.getTipoNombre(t.tipo)),c(5),h(" ",t.capacidad),c(2),h(" ",t.descripcion?t.descripcion.length>50?t.descripcion.substring(0,50)+"...":t.descripcion:"Sin descripci\xF3n"," ")}}function ie(e,a){if(e&1&&(E(0),m(1,te,22,6,"ion-card",10),M()),e&2){let t=p();c(),l("ngForOf",t.espacios)}}function ne(e,a){if(e&1){let t=b();r(0,"ion-button",18),x("click",function(){f(t);let n=p(2);return u(n.irACrearEspacio())}),s(1," Crear Nuevo Espacio "),o()}}function oe(e,a){if(e&1&&(r(0,"div",8)(1,"p"),s(2,"No se encontraron espacios disponibles."),o(),m(3,ne,2,0,"ion-button",17),o()),e&2){let t=p();c(3),l("ngIf",t.isAdmin)}}function re(e,a){if(e&1){let t=b();r(0,"ion-fab",19)(1,"ion-button",20),x("click",function(){f(t);let n=p();return u(n.irACrearEspacio())}),g(2,"ion-icon",21),s(3," Nuevo Espacio "),o()()}}var _e=(()=>{let a=class a{constructor(i,n,d){this.espaciosService=i,this.router=n,this.authService=d,this.espacios=[],this.isLoading=!1,this.error=null,this.isAdmin=!1,this.tiposEspacioMap=new Map([[1,"Cancha"],[2,"Sede"],[3,"Parque"]])}ngOnInit(){this.checkUserRole(),this.cargarEspacios()}checkUserRole(){return C(this,null,function*(){try{this.isAdmin=yield this.authService.checkIfAdmin()}catch(i){console.error("No se pudo determinar el rol del usuario:",i),this.isAdmin=!1}})}cargarEspacios(i){return C(this,null,function*(){i||(this.isLoading=!0,this.error=null);try{this.espacios=yield this.espaciosService.obtenerEspacios()}catch(n){this.error=n.message||"Error desconocido al cargar los espacios.",this.espacios=[]}finally{this.isLoading=!1,i&&i.target.complete()}})}getTipoNombre(i){if(i==null)return"N/A";let n=parseInt(i.toString(),10);return isNaN(n)?"N/A":this.tiposEspacioMap.get(n)||"Desconocido"}goToDetail(i){this.router.navigateByUrl(`/espacios/${i}`)}irACrearEspacio(){this.router.navigateByUrl("espacio/crear")}};a.\u0275fac=function(n){return new(n||a)(_(X),_(y),_(W))},a.\u0275cmp=I({type:a,selectors:[["app-espacios"]],decls:12,vars:6,consts:[[1,"rb-header",3,"translucent"],["slot","start"],["menu","mainMenu","autoHide","false"],[3,"fullscreen"],[1,"page-wrap","ion-padding"],["class","ion-text-center ion-padding",4,"ngIf"],[4,"ngIf"],["slot","fixed","vertical","bottom","horizontal","end",4,"ngIf"],[1,"ion-text-center","ion-padding"],["name","crescent","color","primary"],["class","card","button","true","detail","false",3,"click",4,"ngFor","ngForOf"],["button","true","detail","false",1,"card",3,"click"],["alt","Imagen del espacio","style","width: 100%; height: 180px; object-fit: cover;",3,"src",4,"ngIf"],["size","6"],["size","6",1,"ion-text-end"],[1,"ion-padding-top-sm","ion-text-start","ion-text-sm"],["alt","Imagen del espacio",2,"width","100%","height","180px","object-fit","cover",3,"src"],["fill","solid","size","large",3,"click",4,"ngIf"],["fill","solid","size","large",3,"click"],["slot","fixed","vertical","bottom","horizontal","end"],["color","primary","fill","solid",1,"fab-squared-button",3,"click"],["name","add-outline","slot","start"]],template:function(n,d){n&1&&(r(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),g(3,"ion-menu-button",2),o(),r(4,"ion-title"),s(5,"Nuestros Espacios"),o()()(),r(6,"ion-content",3)(7,"div",4),m(8,Z,4,0,"div",5)(9,ie,2,1,"ng-container",6)(10,oe,4,1,"div",5),o(),m(11,re,4,0,"ion-fab",7),o()),n&2&&(l("translucent",!0),c(6),l("fullscreen",!0),c(2),l("ngIf",d.isLoading),c(),l("ngIf",!d.isLoading&&(d.espacios==null?null:d.espacios.length)),c(),l("ngIf",!d.isLoading&&!(d.espacios!=null&&d.espacios.length)),c(),l("ngIf",d.isAdmin))},dependencies:[Q,T,N,z,A,F,V,D,L,j,q,B,R,U,$,H,Y,G,J,K,w,P,O,k,S],styles:['@charset "UTF-8";[_nghost-%COMP%], html[_nghost-%COMP%], html   [_nghost-%COMP%]{color-scheme:light!important;--rb-primary: #2563eb;--rb-bg: #f5f7fb;--rb-text: #0f172a;--rb-muted: #475569;--ion-text-color: var(--rb-text);--ion-background-color: var(--rb-bg);--ion-item-background: #ffffff;--ion-card-background: #ffffff}.rb-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: linear-gradient(135deg, var(--rb-primary), #60a5fa);--color: #fff;--border-color: transparent}.page-wrap[_ngcontent-%COMP%]{max-width:960px;margin:0 auto;padding-top:1px}ion-card.card[_ngcontent-%COMP%]{background:#fff;border-radius:18px;border:1px solid rgba(2,6,23,.08);box-shadow:0 12px 28px #0206171a;overflow:hidden;margin-bottom:16px;transition:transform .2s ease-in-out,box-shadow .2s ease-in-out}ion-card.card[_ngcontent-%COMP%]:hover{box-shadow:0 14px 30px #02061726}ion-card.card[_ngcontent-%COMP%]:active{transform:translateY(1px);box-shadow:0 8px 24px #02061714}ion-card.card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]{background:#fff;border-bottom:1px solid rgba(2,6,23,.06);padding-bottom:8px}ion-card.card[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{color:var(--rb-text);font-weight:800;font-size:1.3rem}ion-card.card[_ngcontent-%COMP%]   ion-card-subtitle[_ngcontent-%COMP%]{color:#64748b;font-weight:600;margin-top:4px;font-size:.9rem}ion-card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0;color:var(--rb-text)}ion-card-content[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--rb-muted);font-weight:600}ion-grid[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.95rem}.ion-padding-top-sm[_ngcontent-%COMP%]{padding-top:8px}.ion-text-sm[_ngcontent-%COMP%]{font-size:.9rem;color:var(--rb-muted)}ion-fab[_ngcontent-%COMP%]{--height: auto;--width: auto;--offset-bottom: 20px;--offset-end: 20px}.fab-squared-button[_ngcontent-%COMP%]{--border-radius: 12px;--padding-start: 18px;--padding-end: 18px;--padding-top: 14px;--padding-bottom: 14px;height:auto;font-weight:700;font-size:1.05rem;box-shadow:0 10px 18px #2563eb4d}.fab-squared-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.4em;margin-inline-end:8px}.fab-squared-button[_ngcontent-%COMP%]:active{transform:translateY(1px);box-shadow:0 6px 14px #2563eb33}@media (prefers-color-scheme: dark){[_nghost-%COMP%]{--ion-background-color: var(--rb-bg);--ion-card-background: #ffffff;--ion-item-background: #ffffff;--ion-text-color: var(--rb-text)}}']});let e=a;return e})();export{_e as EspaciosPage};
