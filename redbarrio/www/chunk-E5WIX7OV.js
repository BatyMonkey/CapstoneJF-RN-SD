import{a as ie}from"./chunk-FHDZCLRV.js";import"./chunk-IIFLUBAB.js";import"./chunk-SIZNMXVG.js";import"./chunk-TX5AFJTF.js";import"./chunk-66QFWZLQ.js";import{A as l,Aa as L,B as f,Ba as A,C as v,Fa as $,Ga as D,Ha as B,Ia as R,Ja as N,K as S,Ka as H,L as T,La as j,Na as W,O as E,P as w,Q as z,Ra as G,S as k,Sa as U,Va as q,Wa as J,_ as F,_a as K,bb as Q,cb as X,f as C,g as I,i as o,ib as Y,j as P,jb as Z,k as V,lb as ee,m as _,mb as te,o as s,p as t,q as a,r as m,s as y,t as M,u as O,v as u,vb as ne,w as p}from"./chunk-H7HGEQUX.js";import"./chunk-G4GOZ2R2.js";import"./chunk-2GHFZAQB.js";import"./chunk-QUJFQN2Y.js";import"./chunk-VBARJE22.js";import"./chunk-6T3MRKSY.js";import"./chunk-LG5HFCS7.js";import"./chunk-PTM2QU7L.js";import"./chunk-Z7QLWI7J.js";import"./chunk-DNXVUVY2.js";import"./chunk-JS56SECH.js";import"./chunk-GFYYGWWH.js";import"./chunk-EXVGCGBZ.js";import"./chunk-IACAUHTZ.js";import"./chunk-WIVIOYVM.js";import"./chunk-ULQSOQCK.js";import"./chunk-JOPIHTUJ.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-EKNMT7ZB.js";import"./chunk-CKP3SGE2.js";import"./chunk-K6CL52MX.js";import{j as b}from"./chunk-VI73JOY6.js";function oe(e,r){if(e&1&&(t(0,"ion-text",18),l(1),a()),e&2){let i=p();o(),f(i.errorActivas)}}function ae(e,r){e&1&&(t(0,"div",19),m(1,"ion-spinner",20),a())}function re(e,r){if(e&1&&(t(0,"ion-card-subtitle",28),l(1),a()),e&2){let i=p().$implicit;o(),v(" ",i.descripcion," ")}}function ce(e,r){if(e&1){let i=O();t(0,"ion-card",23),u("click",function(){let c=C(i).$implicit,n=p(2);return I(n.irDetalle(c))}),t(1,"ion-card-header")(2,"ion-card-title",24),l(3),a(),_(4,re,2,1,"ion-card-subtitle",25),a(),t(5,"ion-card-content")(6,"div",26),m(7,"ion-icon",27),t(8,"span"),l(9),a()()()()}if(e&2){let i=r.$implicit,d=p(2);o(3),f(i.titulo),o(),s("ngIf",i.descripcion),o(5),v("Termina en: ",d.tiempoRestante(i.fecha_fin))}}function se(e,r){e&1&&(t(0,"ion-text",29)(1,"p",30),l(2,"No hay votaciones activas en este momento."),a()())}function le(e,r){if(e&1&&(y(0),_(1,ce,10,3,"ion-card",21)(2,se,3,0,"ion-text",22),M()),e&2){let i=p();o(),s("ngForOf",i.activas)("ngForTrackBy",i.trackById),o(),s("ngIf",!i.activas.length)}}function de(e,r){if(e&1&&(t(0,"ion-text",18),l(1),a()),e&2){let i=p();o(),f(i.errorFinalizadas)}}function pe(e,r){e&1&&(t(0,"div",19),m(1,"ion-spinner",20),a())}function ge(e,r){if(e&1&&(t(0,"ion-card-subtitle",28),l(1),a()),e&2){let i=p().$implicit;o(),v(" ",i.descripcion," ")}}function me(e,r){if(e&1){let i=O();t(0,"ion-card",23),u("click",function(){let c=C(i).$implicit,n=p(2);return I(n.irDetalle(c))}),t(1,"ion-card-header")(2,"ion-card-title",24),l(3),a(),_(4,ge,2,1,"ion-card-subtitle",25),a(),t(5,"ion-card-content")(6,"div",31),m(7,"ion-icon",32),t(8,"span"),l(9),S(10,"date"),a()()()()}if(e&2){let i=r.$implicit;o(3),f(i.titulo),o(),s("ngIf",i.descripcion),o(5),v("Finaliz\xF3: ",T(10,3,i.fecha_fin,"medium"))}}function _e(e,r){e&1&&(t(0,"ion-text",29)(1,"p",30),l(2,"No hay votaciones finalizadas."),a()())}function fe(e,r){if(e&1&&(y(0),_(1,me,11,6,"ion-card",21)(2,_e,3,0,"ion-text",22),M()),e&2){let i=p();o(),s("ngForOf",i.finalizadas)("ngForTrackBy",i.trackById),o(),s("ngIf",!i.finalizadas.length)}}var Pe=(()=>{let r=class r{constructor(d,c){this.votosSvc=d,this.router=c,this.cargandoActivas=!0,this.cargandoFinalizadas=!0,this.errorActivas="",this.errorFinalizadas="",this.activas=[],this.finalizadas=[],this.accordionValue=void 0,this.now=Date.now()}ngOnInit(){return b(this,null,function*(){this.timer=setInterval(()=>this.now=Date.now(),1e3),yield this.cargarTodo()})}ionViewWillEnter(){this.accordionValue=void 0}ionViewWillLeave(){this.accordionValue=void 0}ngOnDestroy(){this.timer&&clearInterval(this.timer)}cargarTodo(d){return b(this,null,function*(){this.cargandoActivas=!0,this.cargandoFinalizadas=!0,this.errorActivas="",this.errorFinalizadas="";try{let[c,n]=yield Promise.all([this.votosSvc.listarVotacionesActivas(),this.votosSvc.listarVotacionesFinalizadas?.()??this.votosSvc.listarVotacionesActivas()]);this.activas=c||[],this.finalizadas=n||[]}catch(c){this.errorActivas=c?.message??"No se pudieron cargar las votaciones activas.",this.errorFinalizadas=c?.message??"No se pudieron cargar las votaciones finalizadas."}finally{this.cargandoActivas=!1,this.cargandoFinalizadas=!1,d&&d.target.complete?.()}})}irDetalle(d){this.router.navigate(["/votacion",d.id])}tiempoRestante(d){let c=new Date(d).getTime()-this.now;if(c<=0)return"Finalizada";let n=Math.floor(c/1e3),x=Math.floor(n/86400);n%=86400;let g=Math.floor(n/3600);n%=3600;let h=Math.floor(n/60);return n%=60,x>0?`${x}d ${g}h ${h}m`:g>0?`${g}h ${h}m ${n}s`:`${h}m ${n}s`}trackById(d,c){return c.id}};r.\u0275fac=function(c){return new(c||r)(P(ie),P(F))},r.\u0275cmp=V({type:r,selectors:[["app-votaciones-list"]],decls:35,vars:11,consts:[[1,"rb-header"],["slot","start"],["menu","mainMenu","autoHide","false"],[1,"ion-padding","vot-list",3,"fullscreen"],["slot","fixed",3,"ionRefresh"],[1,"section"],[3,"ionChange","value"],["value","activas"],["slot","header","lines","none","button","","detail","",1,"section-header"],["slot","start","name","flame-outline"],["slot","end",1,"count","primary"],["slot","content",1,"section-content"],["color","danger",4,"ngIf"],["class","loading",4,"ngIf"],[4,"ngIf"],["value","finalizadas"],["slot","start","name","checkmark-done-outline"],["slot","end",1,"count"],["color","danger"],[1,"loading"],["name","crescent"],["class","card","button","",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],["color","medium",4,"ngIf"],["button","",1,"card",3,"click"],[1,"card-title"],["class","card-subtitle",4,"ngIf"],[1,"meta","primary"],["name","time-outline"],[1,"card-subtitle"],["color","medium"],[1,"empty"],[1,"meta"],["name","calendar-outline"]],template:function(c,n){c&1&&(t(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),m(3,"ion-menu-button",2),a(),t(4,"ion-title"),l(5,"Votaciones"),a()()(),t(6,"ion-content",3)(7,"ion-refresher",4),u("ionRefresh",function(g){return n.cargarTodo(g)}),m(8,"ion-refresher-content"),a(),t(9,"section",5)(10,"ion-accordion-group",6),u("ionChange",function(g){return n.accordionValue=g.detail.value}),t(11,"ion-accordion",7)(12,"ion-item",8),m(13,"ion-icon",9),t(14,"ion-label"),l(15,"Votaciones activas"),a(),t(16,"ion-chip",10),l(17),a()(),t(18,"div",11),_(19,oe,2,1,"ion-text",12)(20,ae,2,0,"div",13)(21,le,3,3,"ng-container",14),a()()()(),t(22,"section",5)(23,"ion-accordion-group",6),u("ionChange",function(g){return n.accordionValue=g.detail.value}),t(24,"ion-accordion",15)(25,"ion-item",8),m(26,"ion-icon",16),t(27,"ion-label"),l(28,"Votaciones finalizadas"),a(),t(29,"ion-chip",17),l(30),a()(),t(31,"div",11),_(32,de,2,1,"ion-text",12)(33,pe,2,0,"div",13)(34,fe,3,3,"ng-container",14),a()()()()()),c&2&&(o(6),s("fullscreen",!0),o(4),s("value",n.accordionValue),o(7),f(n.activas.length),o(2),s("ngIf",n.errorActivas),o(),s("ngIf",n.cargandoActivas),o(),s("ngIf",!n.cargandoActivas),o(2),s("value",n.accordionValue),o(7),f(n.finalizadas.length),o(2),s("ngIf",n.errorFinalizadas),o(),s("ngIf",n.cargandoFinalizadas),o(),s("ngIf",!n.cargandoFinalizadas))},dependencies:[k,E,w,ne,L,A,$,D,B,R,N,H,j,W,G,U,q,J,K,Q,X,Y,Z,ee,te,z],styles:['@charset "UTF-8";[_nghost-%COMP%]{color-scheme:light;--rb-primary: #2563eb;--rb-primary-10: rgba(37, 99, 235, .1);--rb-primary-20: rgba(37, 99, 235, .2);--rb-bg: #f8fafc;--rb-text: #0f172a;--ion-background-color: var(--rb-bg);--ion-text-color: var(--rb-text)}.rb-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: linear-gradient(135deg, var(--rb-primary), #60a5fa);--color: #fff;--border-color: transparent}.section[_ngcontent-%COMP%]{margin-bottom:18px}.section-header[_ngcontent-%COMP%]{--background: #ffffff;--color: var(--rb-text);--padding-start: 14px;--padding-end: 12px;--min-height: 56px;border:1px solid rgba(2,6,23,.06);border-radius:14px;box-shadow:0 10px 22px #0206170f}.section-header[_ngcontent-%COMP%]   ion-icon[slot=start][_ngcontent-%COMP%]{font-size:20px;margin-right:8px;opacity:.9}.section-header[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-weight:700;letter-spacing:.2px}.section-header[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{--background: rgba(2, 6, 23, .1);--color: #111827;height:24px;border-radius:999px;padding:0 10px;font-size:12px}.section-header[_ngcontent-%COMP%]   .count.primary[_ngcontent-%COMP%]{--background: var(--rb-primary-10);--color: var(--rb-text);font-weight:700}.section-content[_ngcontent-%COMP%]{padding:10px 2px 2px;background:transparent}.loading[_ngcontent-%COMP%]{display:grid;place-items:center;padding:18px 0}.card[_ngcontent-%COMP%]{background:#fff;border-radius:18px;border:1px solid rgba(2,6,23,.06);box-shadow:0 10px 26px #02061714;overflow:hidden;margin:12px 4px}.card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]{background:#fff;border-bottom:1px solid rgba(2,6,23,.06)}.card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{font-weight:800;color:var(--rb-text)}.card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   .card-subtitle[_ngcontent-%COMP%]{color:#64748b;font-weight:500}.card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding-top:12px}.card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;padding:10px 12px;border-radius:12px;background:#f3f4f6;color:#475569;font-weight:600}.card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px;opacity:.9}.card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   .meta.primary[_ngcontent-%COMP%]{background:var(--rb-primary-10);color:var(--rb-text);border:1px solid var(--rb-primary-20)}.empty[_ngcontent-%COMP%]{text-align:center;margin:18px 0 6px}.ios[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{--min-height: 52px;--padding-start: 12px;--padding-end: 10px}']});let e=r;return e})();export{Pe as VotacionesListPage};
