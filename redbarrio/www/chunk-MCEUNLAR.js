import{a as x}from"./chunk-66QFWZLQ.js";import{A as p,B as h,C as I,Fa as E,Ga as w,Na as D,O as M,P,Ra as N,S as y,Y as O,ba as S,h as u,i as o,ib as T,j as C,jb as z,k as b,lb as k,m,mb as F,o as d,ob as A,p as i,q as a,r as s,vb as U,w as g,wb as B}from"./chunk-H7HGEQUX.js";import"./chunk-G4GOZ2R2.js";import"./chunk-2GHFZAQB.js";import"./chunk-QUJFQN2Y.js";import"./chunk-VBARJE22.js";import"./chunk-6T3MRKSY.js";import"./chunk-LG5HFCS7.js";import"./chunk-PTM2QU7L.js";import"./chunk-Z7QLWI7J.js";import"./chunk-DNXVUVY2.js";import"./chunk-JS56SECH.js";import"./chunk-GFYYGWWH.js";import"./chunk-EXVGCGBZ.js";import"./chunk-IACAUHTZ.js";import"./chunk-WIVIOYVM.js";import"./chunk-ULQSOQCK.js";import"./chunk-JOPIHTUJ.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-EKNMT7ZB.js";import"./chunk-CKP3SGE2.js";import"./chunk-K6CL52MX.js";import{j as v}from"./chunk-VI73JOY6.js";function R(t,r){t&1&&(i(0,"div",6),s(1,"ion-spinner",7),i(2,"p"),p(3,"Cargando detalle de noticia..."),a()())}function $(t,r){if(t&1&&(i(0,"div"),s(1,"img",12),a()),t&2){let e=g(2);o(),d("src",e.noticia.url_foto[0],u)}}function j(t,r){if(t&1&&(i(0,"p"),p(1),a()),t&2){let e=g().$implicit;o(),h(e.value)}}function H(t,r){if(t&1&&(i(0,"ion-card",15),s(1,"img",16),a()),t&2){let e=g().$implicit;o(),d("src",e.value,u)}}function L(t,r){if(t&1&&(i(0,"div",13),m(1,j,2,1,"p",5)(2,H,2,1,"ion-card",14),a()),t&2){let e=r.$implicit;o(),d("ngIf",e.type==="parrafo"),o(),d("ngIf",e.type==="foto")}}function q(t,r){if(t&1&&(i(0,"div"),m(1,$,2,1,"div",5),i(2,"div",8)(3,"h1"),p(4),a(),i(5,"ion-text",9)(6,"p",10),p(7," Autor: "),i(8,"strong"),p(9),a(),p(10),a()()(),s(11,"hr"),m(12,L,3,2,"div",11),s(13,"div",8),a()),t&2){let e=g();o(),d("ngIf",e.noticia.url_foto&&e.noticia.url_foto.length>0),o(3),h(e.noticia.titulo),o(5),h(e.noticia.nombre_autor||"An\xF3nimo"),o(),I(" | ",e.formatearFecha(e.noticia.fecha_creacion)," "),o(2),d("ngForOf",e.contenidoMixto)}}function G(t,r){t&1&&(i(0,"div",6)(1,"h2"),p(2,"Noticia no encontrada"),a(),i(3,"p"),p(4,"Lo sentimos, no pudimos cargar el detalle de la noticia. Por favor, verifica el ID."),a()())}var et=(()=>{let r=class r{constructor(n){this.route=n,this.noticiaId=null,this.noticia=null,this.estaCargando=!0,this.contenidoMixto=[],this.supabase=B(x.supabaseUrl,x.supabaseAnonKey)}ngOnInit(){let n=this.route.snapshot.paramMap.get("id");n?(this.noticiaId=parseInt(n,10),this.cargarDetalleNoticia(this.noticiaId)):this.estaCargando=!1}cargarDetalleNoticia(n){return v(this,null,function*(){this.estaCargando=!0;try{let{data:l,error:c}=yield this.supabase.from("noticias").select("id, titulo, parrafos, nombre_autor, fecha_creacion, url_foto").eq("id",n).single();if(c&&c.code!=="PGRST116")throw c;l?(this.noticia=l,this.mezclarContenido()):this.noticia=null}catch(l){console.error("Error al cargar el detalle de la noticia:",l),this.noticia=null}finally{this.estaCargando=!1}})}mezclarContenido(){if(this.contenidoMixto=[],!this.noticia)return;let n=this.noticia.parrafos||[],l=this.noticia.url_foto||[],c=0,f=0;for(;c<n.length||f<l.length;){for(let _=0;_<2;_++)c<n.length&&(this.contenidoMixto.push({type:"parrafo",value:n[c]}),c++);f<l.length&&(this.contenidoMixto.push({type:"foto",value:l[f]}),f++)}}formatearFecha(n){return n?new Date(n).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"}):""}};r.\u0275fac=function(l){return new(l||r)(C(O))},r.\u0275cmp=b({type:r,selectors:[["app-detalle-noticia"]],decls:10,vars:5,consts:[[3,"translucent"],["slot","start"],["defaultHref","/noticias"],[3,"fullscreen"],["class","ion-text-center ion-padding",4,"ngIf"],[4,"ngIf"],[1,"ion-text-center","ion-padding"],["name","crescent"],[1,"ion-padding"],["color","medium"],[1,"ion-margin-bottom"],["class","ion-padding-horizontal",4,"ngFor","ngForOf"],["alt","Imagen de Portada de la Noticia",1,"cover-image",3,"src"],[1,"ion-padding-horizontal"],["class","ion-margin-vertical",4,"ngIf"],[1,"ion-margin-vertical"],["alt","Imagen de contenido",1,"content-image",3,"src"]],template:function(l,c){l&1&&(i(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),s(3,"ion-back-button",2),a(),i(4,"ion-title"),p(5,"Detalle de Noticia"),a()()(),i(6,"ion-content",3),m(7,R,4,0,"div",4)(8,q,14,5,"div",5)(9,G,5,0,"div",4),a()),l&2&&(d("translucent",!0),o(6),d("fullscreen",!0),o(),d("ngIf",c.estaCargando),o(),d("ngIf",!c.estaCargando&&c.noticia),o(),d("ngIf",!c.estaCargando&&!c.noticia))},dependencies:[y,M,P,U,E,w,D,N,T,z,k,F,A,S],styles:['@charset "UTF-8";[_nghost-%COMP%]{color-scheme:light;--rb-primary: #2563eb;--rb-text: #0f172a;--rb-muted: #64748b;--rb-sep: rgba(2, 6, 23, .08);--ion-background-color: #ffffff;--ion-text-color: var(--rb-text)}ion-toolbar[_ngcontent-%COMP%]{--background: linear-gradient(135deg, var(--rb-primary), #60a5fa);--color: #fff;--border-color: transparent;--min-height: 56px}ion-content[_ngcontent-%COMP%]{--background: #fff}.cover-image[_ngcontent-%COMP%]{width:100%;height:220px;object-fit:cover;display:block;border-bottom:1px solid var(--rb-sep)}@media (min-width: 768px){.cover-image[_ngcontent-%COMP%]{height:300px}}ion-content[_ngcontent-%COMP%]   .ion-padding[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%]   .ion-padding-horizontal[_ngcontent-%COMP%]{max-width:880px;margin-left:auto;margin-right:auto}h1[_ngcontent-%COMP%]{color:var(--rb-text);font-size:22px;line-height:1.25;font-weight:800;margin:12px 0 6px}@media (min-width: 768px){h1[_ngcontent-%COMP%]{font-size:26px}}ion-text[color=medium][_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--rb-muted)!important;margin:4px 0 10px;font-weight:600;letter-spacing:.2px}hr[_ngcontent-%COMP%]{border:0;height:1px;background:linear-gradient(to right,transparent,var(--rb-sep),transparent);margin:10px auto 14px;max-width:880px}ion-content[_ngcontent-%COMP%]   .ion-padding-horizontal[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#334155;font-size:16px;line-height:1.6;margin:0 0 14px;text-align:start}ion-content[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{background:#fff;border:1px solid var(--rb-sep);border-radius:14px;box-shadow:0 10px 24px #0206171a;overflow:hidden}.content-image[_ngcontent-%COMP%]{width:100%;height:auto;display:block}.ion-text-center[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#475569}@media (prefers-reduced-motion: reduce){.cover-image[_ngcontent-%COMP%]{transition:none}}']});let t=r;return t})();export{et as DetalleNoticiaPage};
