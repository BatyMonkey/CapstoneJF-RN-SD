import{a as ce}from"./chunk-6C47DM3O.js";import{a as de}from"./chunk-3ODY6JMO.js";import{$ as I,$a as ie,A as M,Aa as B,Ba as V,Ca as H,Da as R,Ea as q,Fa as K,Ha as U,Ia as Y,Ja as J,Ka as Q,La as W,M as v,Ma as X,P as O,Qa as Z,Sa as $,Ta as ee,Ua as te,Va as oe,Z as f,_ as w,_a as ne,ab as re,da as k,eb as ae,fa as F,h as r,hb as le,i as x,ia as S,j as y,l as _,la as E,m as g,ma as N,n as e,o as t,oa as T,p as u,sa as G,t as C,ta as D,wa as z,x as P,xa as A,y as n,ya as L,za as j}from"./chunk-C6RY7PX2.js";import"./chunk-G4GOZ2R2.js";import"./chunk-3EH7DRQW.js";import"./chunk-QUJFQN2Y.js";import"./chunk-E24K4UEG.js";import"./chunk-LEIZBYT7.js";import"./chunk-UM2WNVGK.js";import"./chunk-PTM2QU7L.js";import"./chunk-Z7QLWI7J.js";import"./chunk-DNXVUVY2.js";import"./chunk-TVBC6MYV.js";import"./chunk-26CMJVF7.js";import"./chunk-QQBOPM2N.js";import"./chunk-IACAUHTZ.js";import"./chunk-6KZXCEZL.js";import"./chunk-C7E54FQN.js";import"./chunk-ATYZ3M5D.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-Z455EQLB.js";import"./chunk-CKP3SGE2.js";import"./chunk-CIXXGG5D.js";import{j as b}from"./chunk-VI73JOY6.js";function pe(c,a){c&1&&(e(0,"ion-note",33),n(1," Debe tener al menos 5 caracteres. "),t())}function me(c,a){c&1&&(e(0,"ion-note",33),n(1," Debe tener al menos 10 caracteres. "),t())}var Pe=(()=>{let a=class a{constructor(i,l,o){this.fb=i,this.alertCtrl=l,this.auth=o}ngOnInit(){return b(this,null,function*(){this.proyectoForm=this.fb.group({titulo:["",[f.required,f.minLength(5)]],descripcion:["",[f.required,f.minLength(10)]],estado:["pendiente"]}),this.perfil=yield this.auth.miPerfil()})}generarProyecto(){return b(this,null,function*(){if(this.proyectoForm.invalid){yield this.showAlert("Error","Debes completar todos los campos.");return}try{let{error:i}=yield de.from("proyecto").insert([{id_auth:this.perfil?.id_auth,titulo:this.proyectoForm.value.titulo,descripcion:this.proyectoForm.value.descripcion,estado:this.proyectoForm.value.estado}]);if(i)throw i;yield this.showAlert("\xC9xito","Proyecto creado correctamente \u2705"),this.proyectoForm.reset({estado:"pendiente"})}catch(i){yield this.showAlert("Error",i.message||"No se pudo crear el proyecto")}})}showAlert(i,l){return b(this,null,function*(){yield(yield this.alertCtrl.create({header:i,message:l,buttons:["OK"]})).present()})}};a.\u0275fac=function(l){return new(l||a)(x(N),x(ae),x(ce))},a.\u0275cmp=y({type:a,selectors:[["app-generar-proyecto"]],decls:66,vars:10,consts:[[1,"rb-header"],["slot","start"],["menu","mainMenu","autoHide","false"],[1,"ion-padding","generar-proyecto",3,"fullscreen"],[1,"page-wrap"],[1,"card","hero"],["name","build-outline","slot","start",1,"hero-icon"],[1,"hero-text"],["color","primary","outline","true"],["name","information-circle-outline"],[1,"card"],["novalidate","",3,"ngSubmit","formGroup"],[1,"form-grid"],[1,"row-gap"],["size","12","sizeMd","8"],[1,"field"],["position","stacked"],["formControlName","titulo","type","text","placeholder","Ej: Plaza Comunitaria","maxlength","80"],[1,"meta-row"],["color","danger",4,"ngIf"],[1,"char-count"],["size","12","sizeMd","4"],[1,"field","field-ghost"],[1,"stacked-label"],["formControlName","estado","mode","ios",1,"estado-segment"],["value","pendiente"],["value","aprobado"],["value","rechazado"],["size","12"],["formControlName","descripcion","autoGrow","true","rows","5","placeholder","Explica el prop\xF3sito del proyecto, etapas y beneficios\u2026"],[1,"actions"],["type","button","fill","outline","color","medium",3,"click"],["type","submit",3,"disabled"],["color","danger"]],template:function(l,o){if(l&1&&(e(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),u(3,"ion-menu-button",2),t(),e(4,"ion-title"),n(5,"Generar Proyecto"),t()()(),e(6,"ion-content",3)(7,"div",4)(8,"ion-card",5)(9,"ion-card-header"),u(10,"ion-icon",6),e(11,"div",7)(12,"ion-card-title"),n(13,"Nuevo proyecto"),t(),e(14,"ion-card-subtitle"),n(15,"Completa los datos y publ\xEDcalo para tu comunidad"),t()()(),e(16,"ion-card-content")(17,"ion-chip",8),u(18,"ion-icon",9),e(19,"ion-label"),n(20,"Los campos con validaci\xF3n son obligatorios"),t()()()(),e(21,"ion-card",10)(22,"ion-card-header")(23,"ion-card-title"),n(24,"Datos del proyecto"),t(),e(25,"ion-card-subtitle"),n(26,"Informaci\xF3n b\xE1sica"),t()(),e(27,"ion-card-content")(28,"form",11),C("ngSubmit",function(){return o.generarProyecto()}),e(29,"ion-grid",12)(30,"ion-row",13)(31,"ion-col",14)(32,"ion-item",15)(33,"ion-label",16),n(34,"T\xEDtulo del proyecto"),t(),u(35,"ion-input",17),t(),e(36,"div",18),_(37,pe,2,0,"ion-note",19),e(38,"span",20),n(39),t()()(),e(40,"ion-col",21)(41,"div",22)(42,"label",23),n(43,"Estado"),t(),e(44,"ion-segment",24)(45,"ion-segment-button",25)(46,"ion-label"),n(47,"Pendiente"),t()(),e(48,"ion-segment-button",26)(49,"ion-label"),n(50,"Aprobado"),t()(),e(51,"ion-segment-button",27)(52,"ion-label"),n(53,"Rechazado"),t()()()()()(),e(54,"ion-row",13)(55,"ion-col",28)(56,"ion-item",15)(57,"ion-label",16),n(58,"Descripci\xF3n"),t(),u(59,"ion-textarea",29),t(),_(60,me,2,0,"ion-note",19),t()()(),e(61,"div",30)(62,"ion-button",31),C("click",function(){return o.proyectoForm.reset({titulo:"",descripcion:"",estado:"pendiente"})}),n(63," Limpiar "),t(),e(64,"ion-button",32),n(65," Crear proyecto "),t()()()()()()()),l&2){let d,p,h,m,s;r(6),g("fullscreen",!0),r(22),g("formGroup",o.proyectoForm),r(4),P("invalid",((d=o.proyectoForm.get("titulo"))==null?null:d.invalid)&&(((d=o.proyectoForm.get("titulo"))==null?null:d.dirty)||((d=o.proyectoForm.get("titulo"))==null?null:d.touched))),r(5),g("ngIf",((p=o.proyectoForm.get("titulo"))==null?null:p.errors)&&(((p=o.proyectoForm.get("titulo"))==null?null:p.dirty)||((p=o.proyectoForm.get("titulo"))==null?null:p.touched))),r(2),M(" ",((h=o.proyectoForm.get("titulo"))==null||h.value==null?null:h.value.length)||0,"/80 "),r(17),P("invalid",((m=o.proyectoForm.get("descripcion"))==null?null:m.invalid)&&(((m=o.proyectoForm.get("descripcion"))==null?null:m.dirty)||((m=o.proyectoForm.get("descripcion"))==null?null:m.touched))),r(4),g("ngIf",((s=o.proyectoForm.get("descripcion"))==null?null:s.errors)&&(((s=o.proyectoForm.get("descripcion"))==null?null:s.dirty)||((s=o.proyectoForm.get("descripcion"))==null?null:s.touched))),r(4),g("disabled",o.proyectoForm.invalid)}},dependencies:[O,v,le,z,A,L,j,B,V,H,R,q,K,U,Y,J,Q,W,X,Z,$,ee,te,oe,ne,ie,re,G,D,T,k,w,I,E,F,S],styles:['@charset "UTF-8";[_nghost-%COMP%], html[_nghost-%COMP%], html   [_nghost-%COMP%]{color-scheme:light!important;--rb-primary: #2563eb;--rb-bg: #f5f7fb;--rb-text: #0f172a;--rb-muted: #475569;--ion-text-color: var(--rb-text);--ion-background-color: var(--rb-bg);--ion-item-background: #ffffff;--ion-card-background: #ffffff}.rb-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: linear-gradient(135deg, var(--rb-primary), #60a5fa);--color: #fff;--border-color: transparent}.page-wrap[_ngcontent-%COMP%]{max-width:960px;margin:0 auto}.card[_ngcontent-%COMP%]{background:#fff;border-radius:18px;border:1px solid rgba(2,6,23,.08);box-shadow:0 12px 28px #0206171a;overflow:hidden;margin-bottom:16px}.card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]{background:#fff;border-bottom:1px solid rgba(2,6,23,.06)}.card[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{color:var(--rb-text);font-weight:800}.card[_ngcontent-%COMP%]   ion-card-subtitle[_ngcontent-%COMP%]{color:#64748b;font-weight:600}.note[_ngcontent-%COMP%]{display:inline-block;padding:10px 14px;border-radius:12px;background:#fff;border:1.5px solid #e2e8f0;box-shadow:0 6px 16px #0206170f;color:var(--rb-muted)}.field[_ngcontent-%COMP%]{margin:10px 0;border-radius:14px;background:#fff;border:1.5px solid #e2e8f0;box-shadow:0 6px 16px #0206170f;--background: #fff;--inner-background: #fff;--min-height: 58px}.field[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{color:var(--rb-muted);font-weight:700;padding:10px 12px 0}.field[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%], .field[_ngcontent-%COMP%]   ion-textarea[_ngcontent-%COMP%], .field[_ngcontent-%COMP%]   ion-select[_ngcontent-%COMP%]{--background: #fff;--color: var(--rb-text);--placeholder-color: #94a3b8;--padding-start: 12px;--padding-end: 12px;--padding-top: 6px;--padding-bottom: 12px;--highlight-color-focused: var(--rb-primary);font-weight:600}.field[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]::part(native), .field[_ngcontent-%COMP%]   ion-textarea[_ngcontent-%COMP%]::part(native){color:var(--rb-text);background:#fff}.field[_ngcontent-%COMP%]:hover{border-color:#cbd5e1}.field[_ngcontent-%COMP%]:focus-within{border-color:var(--rb-primary);box-shadow:0 0 0 3px #2563eb24}.field.invalid[_ngcontent-%COMP%]{border-color:#ef44448c;box-shadow:0 0 0 3px #ef444424}ion-note[_ngcontent-%COMP%]{display:block;margin:4px 6px 0 8px;font-size:.86rem}.estado-wrap[_ngcontent-%COMP%]{padding:10px 12px 14px;border-radius:14px;border:1.5px solid #e2e8f0;background:#fff;box-shadow:0 6px 16px #0206170f}.estado-segment[_ngcontent-%COMP%]{border-radius:10px;background:#f1f5f9;padding:4px;box-shadow:inset 0 0 0 1px #0206170f}.estado-segment[_ngcontent-%COMP%]   ion-segment-button[_ngcontent-%COMP%]{--background: transparent;--background-checked: var(--rb-primary);--indicator-color: var(--rb-primary);--color: #334155;--color-checked: #ffffff;min-height:44px;border-radius:10px;text-transform:none;font-weight:700}.actions[_ngcontent-%COMP%]{margin-top:18px;display:flex;gap:10px;justify-content:flex-end}.actions[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{border-radius:12px;box-shadow:0 10px 18px #2563eb26}.actions[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]:active{transform:translateY(1px)}.ios[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-start: 12px;--inner-padding-end: 12px}@media (prefers-color-scheme: dark){[_nghost-%COMP%]{--ion-background-color: #ffffff;--ion-card-background: #ffffff;--ion-item-background: #ffffff;--ion-text-color: #0f172a}.field[_ngcontent-%COMP%]{--min-height: auto;--padding-start: 12px;--inner-padding-end: 12px;--inner-padding-top: 12px;--inner-padding-bottom: 12px;border:1.5px solid #e2e8f0;border-radius:14px;background:#fff;box-shadow:0 6px 16px #0206170f}.field[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{padding:0;margin:4px 4px 6px 2px;line-height:1.15;color:var(--rb-muted);font-weight:700;display:block}.field[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%], .field[_ngcontent-%COMP%]   ion-textarea[_ngcontent-%COMP%], .field[_ngcontent-%COMP%]   ion-select[_ngcontent-%COMP%]{--background: #fff;--color: var(--rb-text);--placeholder-color: #94a3b8;--padding-start: 10px;--padding-end: 10px;--padding-top: 8px;--padding-bottom: 10px;font-weight:600}.field[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]::part(native), .field[_ngcontent-%COMP%]   ion-textarea[_ngcontent-%COMP%]::part(native){color:var(--rb-text);background:#fff;line-height:1.25}.field[_ngcontent-%COMP%]   ion-textarea[_ngcontent-%COMP%]{min-height:110px}.field[_ngcontent-%COMP%]:focus-within{border-color:var(--rb-primary);box-shadow:0 0 0 3px #2563eb24}.field.invalid[_ngcontent-%COMP%]{border-color:#ef44448c;box-shadow:0 0 0 3px #ef444424}.md[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]{--inner-padding-top: 14px;--inner-padding-bottom: 14px}}']});let c=a;return c})();export{Pe as GenerarProyectoComponent};
