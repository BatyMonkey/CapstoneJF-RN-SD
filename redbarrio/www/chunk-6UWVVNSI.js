import{a as K}from"./chunk-KPKAVJKI.js";import{$a as q,A as O,Aa as D,Ba as k,Ca as L,Da as F,Fa as N,Ia as H,Ja as R,L as y,M as S,Ma as j,P as w,Qa as B,V as T,Ya as z,Za as A,ab as G,e as C,f as I,h as a,hb as J,i as v,j as M,l as h,m as l,n as o,o as c,p as g,s as b,t as P,u as m,xa as V,y as d,ya as $,z as p,za as E}from"./chunk-C6RY7PX2.js";import"./chunk-G4GOZ2R2.js";import"./chunk-3EH7DRQW.js";import"./chunk-QUJFQN2Y.js";import"./chunk-E24K4UEG.js";import"./chunk-LEIZBYT7.js";import"./chunk-UM2WNVGK.js";import"./chunk-PTM2QU7L.js";import"./chunk-Z7QLWI7J.js";import"./chunk-DNXVUVY2.js";import"./chunk-TVBC6MYV.js";import"./chunk-26CMJVF7.js";import"./chunk-QQBOPM2N.js";import"./chunk-IACAUHTZ.js";import"./chunk-6KZXCEZL.js";import"./chunk-C7E54FQN.js";import"./chunk-ATYZ3M5D.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-Z455EQLB.js";import"./chunk-CKP3SGE2.js";import"./chunk-CIXXGG5D.js";import{j as u}from"./chunk-VI73JOY6.js";function Q(t,n){if(t&1&&(o(0,"ion-text",8),d(1),c()),t&2){let s=m();a(),p(s.errorMsg)}}function U(t,n){t&1&&(o(0,"div",9),g(1,"ion-spinner",10),c())}function W(t,n){if(t&1&&(o(0,"ion-card-subtitle"),d(1),c()),t&2){let s=m().$implicit;a(),p(s.descripcion)}}function X(t,n){if(t&1){let s=b();o(0,"ion-card",11),P("click",function(){let r=C(s).$implicit,e=m();return I(e.irDetalle(r))}),o(1,"ion-card-header")(2,"ion-card-title"),d(3),c(),h(4,W,2,1,"ion-card-subtitle",12),c(),o(5,"ion-card-content")(6,"ion-chip",13),g(7,"ion-icon",14),o(8,"ion-label"),d(9),c()()()()}if(t&2){let s=n.$implicit,i=m();a(3),p(s.titulo),a(),l("ngIf",s.descripcion),a(5),O("Termina en: ",i.tiempoRestante(s.fecha_fin))}}function Y(t,n){t&1&&(o(0,"ion-text",15)(1,"p",16),d(2,"No hay votaciones activas en este momento."),c()())}var at=(()=>{let n=class n{constructor(i,r){this.votosSvc=i,this.router=r,this.cargando=!0,this.errorMsg="",this.votaciones=[],this.now=Date.now()}ngOnInit(){return u(this,null,function*(){this.timer=setInterval(()=>this.now=Date.now(),1e3),yield this.cargar()})}ngOnDestroy(){this.timer&&clearInterval(this.timer)}cargar(){return u(this,null,function*(){this.cargando=!0,this.errorMsg="";try{this.votaciones=yield this.votosSvc.listarVotacionesActivas()}catch(i){this.errorMsg=i?.message??"No se pudieron cargar las votaciones."}finally{this.cargando=!1}})}irDetalle(i){this.router.navigate(["/votacion",i.id])}tiempoRestante(i){let r=new Date(i).getTime()-this.now;if(r<=0)return"Finalizada";let e=Math.floor(r/1e3),x=Math.floor(e/86400);e%=86400;let f=Math.floor(e/3600);e%=3600;let _=Math.floor(e/60);return e%=60,x>0?`${x}d ${f}h ${_}m`:f>0?`${f}h ${_}m ${e}s`:`${_}m ${e}s`}};n.\u0275fac=function(r){return new(r||n)(v(K),v(T))},n.\u0275cmp=M({type:n,selectors:[["app-votaciones-list"]],decls:11,vars:5,consts:[[1,"rb-header"],["slot","start"],["menu","mainMenu","autoHide","false"],[1,"ion-padding","vot-list",3,"fullscreen"],["color","danger",4,"ngIf"],["class","ion-text-center",4,"ngIf"],["class","card","button","",3,"click",4,"ngFor","ngForOf"],["color","medium",4,"ngIf"],["color","danger"],[1,"ion-text-center"],["name","crescent"],["button","",1,"card",3,"click"],[4,"ngIf"],["color","primary","outline","true"],["name","time-outline"],["color","medium"],[1,"empty"]],template:function(r,e){r&1&&(o(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),g(3,"ion-menu-button",2),c(),o(4,"ion-title"),d(5,"Votaciones activas"),c()()(),o(6,"ion-content",3),h(7,Q,2,1,"ion-text",4)(8,U,2,0,"div",5)(9,X,10,3,"ion-card",6)(10,Y,3,0,"ion-text",7),c()),r&2&&(a(6),l("fullscreen",!0),a(),l("ngIf",e.errorMsg),a(),l("ngIf",e.cargando),a(),l("ngForOf",e.votaciones),a(),l("ngIf",!e.cargando&&!e.votaciones.length))},dependencies:[w,y,S,J,V,$,E,D,k,L,F,N,H,R,j,B,z,A,q,G],styles:["[_nghost-%COMP%]{--rb-primary: #2563eb;--rb-bg: #f8fafc;--rb-text: #0f172a}.rb-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: linear-gradient(135deg, var(--rb-primary), #60a5fa);--color: #fff;--border-color: transparent}.vot-list[_ngcontent-%COMP%]{--background: var(--rb-bg)}.vot-list[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;border:1px solid rgba(2,6,23,.06);box-shadow:0 10px 26px #02061714;margin-bottom:14px}.vot-list[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{font-weight:800;color:var(--rb-text)}.vot-list[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   ion-card-subtitle[_ngcontent-%COMP%]{color:#64748b}.vot-list[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]{margin-top:6px}.vot-list[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:6px}.vot-list[_ngcontent-%COMP%]   .empty[_ngcontent-%COMP%]{text-align:center;margin-top:16px}"]});let t=n;return t})();export{at as VotacionesListPage};
