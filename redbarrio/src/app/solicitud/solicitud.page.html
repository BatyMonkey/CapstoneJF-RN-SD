<ion-header class="rb-header">
  <ion-toolbar>
    <ion-buttons slot="start">
      <!-- Debe coincidir con menuId="mainMenu" del app.component.html -->
      <ion-menu-button menu="mainMenu" autoHide="false"></ion-menu-button>
    </ion-buttons>
    <ion-title>Reserva de Espacio/Terreno</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding solicitud" [fullscreen]="true">
  <ion-card class="card">
    <ion-card-header>
      <ion-card-title>Formulario de Reserva</ion-card-title>
      <ion-card-subtitle>Completa los datos para solicitar un espacio</ion-card-subtitle>
    </ion-card-header>

    <ion-card-content>
      <form [formGroup]="solicitudForm" (ngSubmit)="enviarSolicitud()">

        <!-- Selección del Espacio -->
        <ion-item class="field">
          <ion-label position="stacked">Selecciona un Espacio</ion-label>
          <ion-select
            formControlName="id_espacio"
            interface="popover"
            placeholder="Elige un espacio disponible">
            <ion-select-option *ngFor="let espacio of espaciosDisponibles" [value]="espacio.id_espacio">
              {{ espacio.nombre }} - {{ espacio.tipo }}
            </ion-select-option>
          </ion-select>
        </ion-item>

        <ion-note color="medium" *ngIf="espaciosDisponibles.length === 0">
          No hay espacios disponibles por ahora.
        </ion-note>

        <!-- Descripción -->
        <ion-item class="field">
          <ion-label position="stacked">Descripción / Comentario</ion-label>
          <ion-textarea
            formControlName="descripcion"
            placeholder="Agrega una nota o detalle sobre la reserva (opcional)">
          </ion-textarea>
        </ion-item>

        <!-- Datos del Evento -->
        <ion-item class="field">
          <ion-label position="stacked">Título del Evento</ion-label>
          <ion-input formControlName="evento_titulo" placeholder="Ej: Campeonato de fútbol"></ion-input>
        </ion-item>

        <ion-item class="field">
          <ion-label position="stacked">Descripción del Evento</ion-label>
          <ion-textarea
            formControlName="evento_descripcion"
            placeholder="Describe el evento">
          </ion-textarea>
        </ion-item>

        <ion-item class="field">
          <ion-label>Fecha de Inicio</ion-label>
          <ion-datetime
            formControlName="evento_inicio"
            presentation="date-time"
            minute-values="0,15,30,45">
          </ion-datetime>
        </ion-item>

        <ion-item class="field">
          <ion-label>Fecha de Término</ion-label>
          <ion-datetime
            formControlName="evento_fin"
            presentation="date-time"
            minute-values="0,15,30,45">
          </ion-datetime>
        </ion-item>

        <!-- Botón principal -->
        <div class="actions">
          <ion-button
            expand="block"
            type="submit"
            [disabled]="solicitudForm.invalid"
            color="success">
            💳 Reservar Espacio
          </ion-button>
        </div>
      </form>
    </ion-card-content>
  </ion-card>
</ion-content>