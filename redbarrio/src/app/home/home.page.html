<!-- HERO HEADER (fuera del ion-content) -->
<ion-header class="rb-hero-header">
  <div class="rb-hero-container">
    <!-- Logo y texto -->
    <div class="rb-hero-info">
      <div class="rb-hero-logo">
        <img src="assets/icon/redbarrio.png" alt="Logo RedBarrio" />
      </div>
      <div class="rb-hero-text">
        <h1>RedBarrio</h1>
        <p>Tu comunidad conectada</p>
      </div>
    </div>


    <!-- ðŸ”¹ Ocultamos el botÃ³n de chat del header (ya tienes el FAB abajo) -->
    <div class="rb-hero-chat-wrapper">
      <!-- vacÃ­o / oculto por CSS -->
    </div>
  </div>
</ion-header>

<!-- CONTENIDO PRINCIPAL -->
<ion-content [fullscreen]="true" class="home-content">

  <!-- TARJETA DE BIENVENIDA -->
  <div class="welcome-wrapper">
    <ion-card class="welcome-card">
      <ion-card-header>
        <ion-card-subtitle>Bienvenido/a</ion-card-subtitle>
        <ion-card-title>Â¡Hola, {{ nombreUsuario || 'Vecino/a' }}!</ion-card-title>
      </ion-card-header>
    </ion-card>
  </div>

  <!-- ACCESOS RÃPIDOS -->
  <div class="section">
    <div class="section-header">
      <span class="section-title">Accesos RÃ¡pidos</span>
    </div>

    <div class="quick-access">
      <!-- Certificados -> /solicitar -->
      <div class="quick-btn" role="button" tabindex="0" (click)="go('solicitar')">
        <ion-icon name="document-text-outline"></ion-icon>
        <span>Certificados</span>
      </div>

      <!-- Proyectos -> /inscripcion/proyectos -->
      <div class="quick-btn" role="button" tabindex="0" (click)="go('inscripcion/proyectos')">
        <ion-icon name="briefcase-outline"></ion-icon>
        <span>Proyectos</span>
      </div>

      <!-- Votaciones -> /votaciones -->
      <div class="quick-btn" role="button" tabindex="0" (click)="go('votaciones')">
        <ion-icon name="checkbox-outline"></ion-icon>
        <span>Votaciones</span>
      </div>

      <!-- Espacios -> /espacios -->
      <div class="quick-btn" role="button" tabindex="0" (click)="go('espacios')">
        <ion-icon name="business-outline"></ion-icon>
        <span>Espacios</span>
      </div>

      <!-- Transparencia -> /dashboard -->
      <div class="quick-btn" role="button" tabindex="0" (click)="go('dashboard')">
        <ion-icon name="bar-chart-outline"></ion-icon>
        <span>Transparencia</span>
      </div>

      <!-- Sugerir Proyecto -> /generar/proyecto -->
      <div class="quick-btn" role="button" tabindex="0" (click)="go('generar/proyecto')">
        <ion-icon name="bulb-outline"></ion-icon>
        <span>Sugerir Proyecto</span>
      </div>
      <!-- Calendario -> /calendario -->
      <div class="quick-btn" role="button" tabindex="0" (click)="go('calendario')">
        <ion-icon name="calendar-outline"></ion-icon>
        <span>Calendario</span>
      </div>
    </div>
  </div>

  <!-- NOTICIAS RECIENTES -->
  <div class="section">
    <div class="section-header">
      <span class="section-title">Noticias Recientes</span>
      <a class="link-more" role="button" tabindex="0" (click)="go('noticias')">Ver todos</a>
    </div>

    <!-- ðŸ”„ Cargando -->
    <ion-spinner
      *ngIf="estaCargando"
      class="loading-spinner"
      name="dots">
    </ion-spinner>

    <!-- ðŸš« Sin noticias -->
    <div *ngIf="!estaCargando && noticias.length === 0" class="no-news">
      No hay noticias disponibles.
    </div>

    <!-- âœ… Noticias dinÃ¡micas (mismo estilo que las de prueba + foto a la izquierda) -->
    <ng-container *ngIf="!estaCargando && noticias.length > 0">
      <ion-card
        class="news-card"
        *ngFor="let n of noticias | slice:0:3"
        (click)="verDetalle(n.id)"
      >
        <div class="news-item">
          <div class="icon" [ngClass]="getIconColor(n)">
            <!-- FOTO si hay url_foto -->
            <img
              *ngIf="n.url_foto && n.url_foto.length > 0"
              [src]="n.url_foto[0]"
              alt="Noticia"
            />
            <!-- Icono megÃ¡fono si no hay foto -->
            <ion-icon
              *ngIf="!n.url_foto || n.url_foto.length === 0"
              name="megaphone-outline">
            </ion-icon>
          </div>

          <div class="text">
            <h4>{{ n.titulo }}</h4>
            <p>{{ n.parrafos?.[0] || 'Ver mÃ¡s detalles de la noticia.' }}</p>
            <small>{{ n.fecha_creacion | date:'short' }}</small>
          </div>
        </div>
      </ion-card>
    </ng-container>
  </div>

</ion-content>
