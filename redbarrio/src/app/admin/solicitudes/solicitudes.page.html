<!-- ============================================================
     HEADER â€” HERO REDBARRIO
=============================================================== -->
<ion-header class="rb-hero-header">
  <div class="rb-hero-container">

    <div class="rb-hero-info">
      <div class="rb-hero-logo">
        <img src="assets/icon/redbarrio.png" alt="Logo RedBarrio" />
      </div>

      <div class="rb-hero-text">
        <h1>RedBarrio</h1>
        <p>{{ subtitulo }}</p>
      </div>
    </div>

    <button class="rb-hero-back" type="button" (click)="goBack()">
      <ion-icon name="chevron-back-outline"></ion-icon>
    </button>

  </div>
</ion-header>


<!-- ============================================================
     CONTENIDO PRINCIPAL
=============================================================== -->
<ion-content>

  <!-- TABS -->
  <div class="tabs-container">
    <button class="tab-btn" 
            [class.active]="activeTab === 'pendientes'" 
            (click)="activeTab = 'pendientes'">
      <ion-icon name="time-outline"></ion-icon>
      Pendientes ({{ solicitudesPendientes.length }})
    </button>

    <button class="tab-btn" 
            [class.active]="activeTab === 'activos'" 
            (click)="activeTab = 'activos'">
      <ion-icon name="people-outline"></ion-icon>
      Activos ({{ solicitudesAprobadas.length }})
    </button>
  </div>


  <!-- ============================
       TAB: PENDIENTES
  ============================== -->
  <section *ngIf="activeTab === 'pendientes'" class="section-wrapper">

    <h2 class="section-title">Solicitudes Pendientes</h2>

    <!-- Badge -->
    <div class="badge" *ngIf="solicitudesPendientes.length > 0">
      {{ solicitudesPendientes.length }} solicitud
    </div>

    <!-- Empty -->
    <div class="empty" *ngIf="solicitudesPendientes.length === 0">
      <ion-icon name="checkmark-done-circle-outline"></ion-icon>
      <p>No hay solicitudes pendientes</p>
    </div>

    <!-- Cards -->
    <div class="card-vecino"
         *ngFor="let s of solicitudesPendientes">

      <div class="card-header">

        <img [attr.src]="getFotoPerfil(s.url_foto_perfil)" (error)="onAvatarError($event)" class="avatar" />

        <div class="info">
          <h3 class="name">{{ s.nombre }}</h3>
          <p class="rut">RUT: {{ s.rut }}</p>

          <div class="date-line">
            <ion-icon name="calendar-outline"></ion-icon>
            Solicitado: {{ s.creado_en | date:'dd-MM-yyyy' }}
          </div>
        </div>
      </div>

      <div class="datos-box">
        <p><ion-icon name="mail-outline"></ion-icon> {{ s.correo }}</p>
        <p><ion-icon name="call-outline"></ion-icon> {{ s.telefono }}</p>
        <p><ion-icon name="location-outline"></ion-icon> {{ s.direccion }}</p>
      </div>

      <div class="acciones">
        <button class="btn-aceptar" (click)="aprobar(s)">
          <ion-icon name="checkmark-outline"></ion-icon> Aceptar
        </button>

        <button class="btn-rechazar" (click)="rechazar(s)">
          <ion-icon name="close-outline"></ion-icon> Rechazar
        </button>
      </div>
    </div>
  </section>


  <!-- ============================
       TAB: ACTIVOS
  ============================== -->
  <section *ngIf="activeTab === 'activos'" class="section-wrapper">

    <h2 class="section-title">Usuarios Activos</h2>

    <div class="badge badge-cyan">
      {{ solicitudesAprobadas.length }} usuario(s)
    </div>

    <!-- Empty -->
    <div class="empty" *ngIf="solicitudesAprobadas.length === 0">
      <ion-icon name="people-outline"></ion-icon>
      <p>No hay usuarios activos</p>
    </div>

    <!-- Cards -->
    <div class="card-vecino active" *ngFor="let s of solicitudesAprobadas">

      <div class="card-header">
        <img [attr.src]="getFotoPerfil(s.url_foto_perfil)" (error)="onAvatarError($event)" class="avatar" />
        <div class="info">
          <div class="line">
            <h3 class="name">{{ s.nombre }}</h3>
            <span class="estado-activo">Activo</span>
          </div>

          <p class="rut">RUT: {{ s.rut }}</p>

          <div class="date-line">
            <ion-icon name="calendar-outline"></ion-icon>
            Desde: {{ s.creado_en | date:'dd-MM-yyyy' }}
          </div>
        </div>
      </div>

      <div class="datos-box">
        <p><ion-icon name="mail-outline"></ion-icon> {{ s.correo }}</p>
        <p><ion-icon name="call-outline"></ion-icon> {{ s.telefono }}</p>
        <p><ion-icon name="location-outline"></ion-icon> {{ s.direccion }}</p>
      </div>

      <button class="btn-desactivar" (click)="desactivar(s)">
        <ion-icon name="ban-outline"></ion-icon> Desactivar Usuario
      </button>

    </div>
  </section>

</ion-content>
