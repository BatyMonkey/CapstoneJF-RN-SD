<ion-header class="edit-header">
    <div class="edit-header-container">
        <button type="button" class="back-btn" (click)="goBack()">
            <ion-icon name="chevron-back-outline"></ion-icon>
        </button>

        <div class="header-text">
            <h1>Editar Proyecto</h1>
            <p>Modificar informaci√≥n del proyecto</p>
        </div>
    </div>
</ion-header>

<ion-content class="edit-page" [fullscreen]="true">
    <div class="edit-content">

        <!-- Mensaje de √©xito -->
        <div class="save-banner" *ngIf="saved">
            <div class="save-icon">
                <ion-icon name="checkmark-circle-outline"></ion-icon>
            </div>
            <div class="save-text">
                <p class="save-title">Cambios guardados exitosamente</p>
                <p class="save-subtitle">El proyecto ha sido actualizado</p>
            </div>
        </div>

        <!-- Formulario -->
        <form [formGroup]="form" (ngSubmit)="guardarCambios()" class="form-layout">

            <!-- T√≠tulo -->
            <div class="form-card">
                <label class="field-label">
                    T√≠tulo del Proyecto <span class="req">*</span>
                </label>
                <input type="text" formControlName="titulo" placeholder="Nombre del proyecto" class="text-input" />
            </div>

            <!-- Estado del proyecto -->
            <div class="form-card">
                <label class="field-label">
                    Estado del proyecto <span class="req">*</span>
                </label>

                <select formControlName="estado_proyecto" class="field-input select-estado">
                    <option value="planificacion">üìã Planificaci√≥n</option>
                    <option value="en-progreso">‚öôÔ∏è En Progreso</option>
                    <option value="completado">‚úÖ Completado</option>
                    <option value="cancelado">‚ùå Cancelado</option>
                </select>
            </div>


            <!-- Descripci√≥n -->
            <div class="form-card">
                <label class="field-label">
                    Descripci√≥n <span class="req">*</span>
                </label>
                <textarea formControlName="descripcion" rows="5" placeholder="Describe el proyecto detalladamente..."
                    class="text-area"></textarea>
            </div>

            <!-- Responsable -->
            <div class="form-card">
                <label class="field-label">
                    Responsable <span class="req">*</span>
                </label>
                <input type="text" formControlName="responsable" placeholder="Nombre del responsable"
                    class="text-input" />
            </div>

            <!-- Fechas -->
            <div class="two-columns">
                <div class="form-card">
                    <label class="field-label">
                        Fecha de Inicio <span class="req">*</span>
                    </label>
                    <input type="date" formControlName="fecha_inicio" class="text-input" />
                </div>

                <div class="form-card">
                    <label class="field-label">
                        Fecha de T√©rmino (Estimada)
                    </label>
                    <input type="date" formControlName="fecha_fin" class="text-input" />
                </div>
            </div>

            <!-- Presupuesto -->
            <div class="form-card">
                <label class="field-label">
                    Presupuesto
                </label>
                <input type="text" formControlName="presupuesto" placeholder="Ej: $8.500.000" class="text-input" />
                <p class="field-help">
                    Ingresa el monto estimado o real del proyecto
                </p>
            </div>

            <!-- Informaci√≥n adicional -->
            <div class="info-card">
                <div class="info-icon">
                    <ion-icon name="alert-circle-outline"></ion-icon>
                </div>
                <div class="info-text">
                    <h4>Informaci√≥n Adicional</h4>
                    <p>‚Ä¢ Participantes actuales: <strong>{{ proyecto?.participantes }}</strong></p>
                    <p>‚Ä¢ ID del proyecto: <strong>#{{ proyecto?.id }}</strong></p>
                    <p>‚Ä¢ Los cambios se guardar√°n en el registro de auditor√≠a</p>
                </div>
            </div>

            <!-- Botones de acci√≥n -->
            <div class="actions-row">
                <button type="submit" class="btn-save" [disabled]="form.invalid || cargando">
                    <ion-icon name="save-outline"></ion-icon>
                    Guardar Cambios
                </button>

                <button type="button" class="btn-delete" (click)="abrirConfirmarEliminar()">
                    <ion-icon name="trash-outline"></ion-icon>
                </button>
            </div>
        </form>

        <!-- Modal de confirmaci√≥n de borrado -->
        <div class="delete-backdrop" *ngIf="showDeleteConfirm">
            <div class="delete-modal">
                <div class="delete-icon-wrapper">
                    <ion-icon name="trash-outline"></ion-icon>
                </div>
                <h3>¬øEliminar Proyecto?</h3>
                <p>
                    Esta acci√≥n no se puede deshacer. Se eliminar√° el proyecto
                    "<strong>{{ proyecto?.titulo }}</strong>" y toda su informaci√≥n.
                </p>

                <div class="delete-actions">
                    <button type="button" class="btn-cancel" (click)="cerrarConfirmarEliminar()">
                        Cancelar
                    </button>
                    <button type="button" class="btn-confirm-delete" (click)="eliminarProyecto()">
                        Eliminar
                    </button>
                </div>
            </div>
        </div>
    </div>
</ion-content>