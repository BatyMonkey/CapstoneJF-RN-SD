<ion-header class="rb-reset-header">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-button
        fill="clear"
        class="back-btn"
        (click)="goToLogin()"
        [disabled]="loading"
      >
        <ion-icon slot="icon-only" name="chevron-back-outline"></ion-icon>
      </ion-button>
    </ion-buttons>

    <div class="rb-reset-toolbar-text">
      <h1>Actualizar contraseña</h1>
      <p>Ingresa tu nueva contraseña para acceder</p>
    </div>
  </ion-toolbar>
</ion-header>

<ion-content class="reset-content" fullscreen>
  <div class="reset-wrapper">
    <div class="reset-card">

      <!-- HEADER AZUL DE LA TARJETA -->
      <div class="reset-card-header">
        <h1>Actualizar Contraseña</h1>
        <p>Ingresa tu nueva contraseña para acceder.</p>
      </div>

      <!-- CUERPO DE LA TARJETA -->
      <div class="reset-card-body">

        <!-- MENSAJE DE ÉXITO -->
        <ion-text color="success" *ngIf="successMsg" class="reset-success">
          <strong>{{ successMsg }}</strong>
        </ion-text>

        <form #f="ngForm" (ngSubmit)="updatePassword(f)" novalidate>
          <!-- CAMPO 1 -->
          <div class="reset-field-label">Nueva Contraseña</div>
          <ion-item lines="none" class="reset-input">
            <ion-icon
              name="lock-closed-outline"
              slot="start"
              color="primary">
            </ion-icon>
            <ion-input
              type="password"
              placeholder="Mínimo 6 caracteres"
              name="newPassword"
              [(ngModel)]="newPassword"
              required
              minlength="6">
            </ion-input>
          </ion-item>

          <!-- CAMPO 2 -->
          <div class="reset-field-label">Confirmar Nueva Contraseña</div>
          <ion-item lines="none" class="reset-input">
            <ion-icon
              name="lock-closed-outline"
              slot="start"
              color="primary">
            </ion-icon>
            <ion-input
              type="password"
              placeholder="Confirmar contraseña"
              name="confirmPassword"
              [(ngModel)]="confirmPassword"
              required>
            </ion-input>
          </ion-item>

          <!-- ERROR GENERAL -->
          <ion-text color="danger" *ngIf="errorMsg" class="reset-error">
            {{ errorMsg }}
          </ion-text>

          <!-- BOTÓN CAMBIAR -->
          <ion-button
            type="submit"
            expand="block"
            size="large"
            class="btn-reset"
            [disabled]="loading || !f.valid">
            <ion-spinner slot="start" *ngIf="loading"></ion-spinner>
            {{ loading ? 'Actualizando…' : 'Cambiar Contraseña' }}
          </ion-button>

          <!-- VOLVER A LOGIN -->
          <ion-button
            type="button"
            expand="block"
            fill="clear"
            class="btn-back-login"
            (click)="goToLogin()"
            [disabled]="loading">
            <ion-icon name="arrow-back-outline" slot="start"></ion-icon>
            Volver a Iniciar Sesión
          </ion-button>
        </form>
      </div>
    </div>
  </div>
</ion-content>
